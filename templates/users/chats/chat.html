{% extends 'home.html' %}

{% block title %}Чат с {{ other_user.username }}{% endblock %}
{% block content %}
<div class="chats-container">
    <div class="chat-list">
        <h3>Чаты</h3>
        <div class="users-list">
            {% for user in users %}
            <div class="user-item">
                <div class="user-info">
                    <span class="username">{{ user.username }}</span>
                    <span class="online-status {% if user.is_online %}online{% else %}offline{% endif %}">
                        {{ user.is_online|yesno:"Онлайн,Оффлайн" }}
                    </span>
                </div>
                <a href="{% url 'chat' user.username %}" class="start-chat-btn">Чат</a>
            </div>
            {% endfor %}
        </div>
    </div>
    
    <div class="chat-window">
        <div class="chat-header">
            <h2>Чат с {{ other_user.username }}</h2>
            <span class="online-status {% if other_user.is_online %}online{% else %}offline{% endif %}">
                {{ other_user.is_online|yesno:"Онлайн,Оффлайн" }}
            </span>
        </div>
        
        <div class="messages-container" id="messages">
            {% for message in messages %}
            <div class="message {% if message.sender == request.user %}my-message{% else %}their-message{% endif %}">
                <div class="message-content">{{ message.content }}</div>
                <div class="message-time">{{ message.timestamp|date:"H:i" }}</div>
            </div>
            {% endfor %}
        </div>
        
        <div class="message-input">
            <form id="message-form">
                <input type="text" id="message-input" placeholder="Введите сообщение...">
                <button type="submit">Отправить</button>
            </form>
        </div>
    </div>
</div>
{% endblock %} 